# CrossiantApp - æŠ€æœ¯æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäºå­—èŠ‚è·³åŠ¨è®­ç»ƒè¥è¯¾é¢˜çš„**å›¾æ–‡å®¢æˆ·ç«¯APP**ï¼Œæ¨¡ä»¿å¯é¢‚APPçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæä¾›UGCå†…å®¹ç¤¾åŒºä½“éªŒã€‚

### ä¸šåŠ¡èƒŒæ™¯
- **äº§å“å®šä½**ï¼šUGCå†…å®¹ç¤¾åŒºï¼Œæ»¡è¶³ç”¨æˆ·ç»éªŒå†³ç­–ã€åœˆå±‚äº¤æµéœ€æ±‚
- **äº§å“å½¢æ€**ï¼šåŒåˆ—å›¾æ–‡è§†é¢‘æ··æ’ï¼Œä»¥å›¾æ–‡ä½“è£ä¸ºä¸»
- **æ ¸å¿ƒä¼˜åŠ¿**ï¼š
    - åŒåˆ—å¸ƒå±€ï¼šå±æ•ˆæ¯”é«˜ï¼Œä¸€å±å±•ç¤ºå¤šä¸ªä½œå“ï¼Œä¾¿äºå†…å®¹ç­›é€‰
    - å›¾æ–‡ä½“è£ï¼šä¿¡æ¯å¯†åº¦é«˜ã€å¯æ§æ„Ÿå¼ºã€åˆ›ä½œé—¨æ§›ä½

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ¶æ„æ¨¡å¼
é‡‡ç”¨ **MVVM** æ¶æ„æ¨¡å¼ï¼š

```
app/src/main/java/com/bytedance/crossiantapp/
â”œâ”€â”€ data/              # æ•°æ®å±‚
|
â”œâ”€â”€ domain/           # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ model/        # é¢†åŸŸæ¨¡å‹
â”‚   â”œâ”€â”€ repository/   # Repositoryæ¥å£
â”‚   â””â”€â”€ usecase/      # ç”¨ä¾‹
â”œâ”€â”€ presentation/     # è¡¨ç°å±‚
â”‚   â”œâ”€â”€ home/         # é¦–é¡µï¼ˆåŒåˆ—ç€‘å¸ƒæµï¼‰
â”‚   â”œâ”€â”€ detail/       # è¯¦æƒ…é¡µ
â”‚   â”œâ”€â”€ profile/      # ä¸ªäººä¸»é¡µ
â”‚   â”œâ”€â”€ navigation/   # å¯¼èˆª
â”‚   â””â”€â”€ components/   # é€šç”¨ç»„ä»¶
â”œâ”€â”€ di/               # ä¾èµ–æ³¨å…¥
â””â”€â”€ util/             # å·¥å…·ç±»
```

## ğŸ¯ åŠŸèƒ½æ¨¡å—è¯¦è§£

### 1. åº”ç”¨æ¡†æ¶

#### 1.1 åº•éƒ¨å¯¼èˆªæ 
- **Tabåˆ—è¡¨**ï¼ˆä»å·¦åˆ°å³ï¼‰ï¼šé¦–é¡µã€æœ‹å‹ã€ç›¸æœº(+)ã€æ¶ˆæ¯ã€æˆ‘
- **å®ç°è¦æ±‚**ï¼š
    - åªéœ€æ”¯æŒ"é¦–é¡µ"å’Œ"æˆ‘"çš„ç‚¹å‡»
    - å¯åŠ¨åé»˜è®¤åœ¨"é¦–é¡µ"
    - ä½¿ç”¨ `NavigationBarItem`

```kotlin
// presentation/components/BottomNavigationBar.kt
// testUI/NavigationBarTest
// å®ç°BottomNavItem
enum class BottomNavItem {
    HOME,      // é¦–é¡µ 
    FRIENDS,   // æœ‹å‹ 
    CAMERA,    // ç›¸æœº 
    MESSAGE,   // æ¶ˆæ¯ 
    PROFILE    // æˆ‘ 
}
```
- NavigationBar éå† BottomNavItem
- ä½¿ç”¨NavigationBarItemåº“ é…ç½®å›¾æ ‡æ–‡å­—ï¼Œç‚¹å‡»äº‹ä»¶ï¼Œé¢œè‰²

#### 1.2 é¦–é¡µTab
- **Tabåˆ—è¡¨**ï¼ˆä»å·¦åˆ°å³ï¼‰ï¼šåŒ—äº¬ã€å›¢è´­ã€å…³æ³¨ã€ç¤¾åŒºã€æ¨è
- **å®ç°è¦æ±‚**ï¼š
    - é»˜è®¤ä½äº"ç¤¾åŒº"
    - å…¶ä»–Tabæ— éœ€æ”¯æŒç‚¹å‡»
- Tab Row + å†…å®¹åŒºåŸŸ
- å®ç°HomeTabRow

#### 1.3 ä¸ªäººé¦–é¡µ
- **ä¸ªäºº** å¤´åƒï¼Œå…³æ³¨ï¼Œç²‰ä¸ï¼Œå–œæ¬¢
- **å®ç°è¦æ±‚**ï¼š
    - ä½¿ç”¨composableå‡½æ•°æ„å»ºUI
    - **Column** æ˜¯ä¸€ä¸ªå‚ç›´æ–¹å‘çš„çº¿æ€§å¸ƒå±€ åŒ…æ‹¬(ICON + TXT + ROW)
    - **Row** æ˜¯ä¸€ä¸ªæ°´å¹³æ–¹å‘çš„çº¿æ€§å¸ƒå±€ åŒ…æ‹¬(å…³æ³¨ï¼Œç²‰ä¸ï¼Œå–œæ¬¢)

#### 1.4 å¯¼èˆªç³»ç»Ÿé…ç½®

- ç†è§£Navigation Compose
  **Navigation Compose** æ˜¯Jetpack Composeçš„å¯¼èˆªåº“ï¼š
- ä½¿ç”¨rememberNavController() ä¿æŒnavigator controller
- å®ç°NavGraph (å¯¼èˆªé¡µé¢)
- å®ç°NavHost (é¡µé¢å®¹å™¨)
- composable(route = Routes.HOME)/ Routes.Profile é…ç½®å¯¼èˆªè·¯ç”±

---
![waterfall.png](E:\code_project\kotlinProject\Croissant\Progress\waterfall.png) ![detail.png](E:\code_project\kotlinProject\Croissant\Progress\detail.png)
---

### æ¶æ„æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Presentation Layer         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  HomeScreen (Composable)       â”‚ â”‚
â”‚  â”‚  - LazyVerticalStaggeredGrid   â”‚ â”‚
â”‚  â”‚  - PostCard Components         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚               â†•                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  HomeViewModel                 â”‚ â”‚
â”‚  â”‚  - StateFlow<UiState>          â”‚ â”‚
â”‚  â”‚  - StateFlow<List<Post>>       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Domain Layer               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  GetFeedUseCase                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚               â†•                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  FeedRepository (Interface)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚               â†•                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Post (Domain Model)           â”‚ â”‚
â”‚  â”‚  Author, Clip, Hashtag, Music  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Data Layer                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  FeedRepositoryImpl            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚               â†•                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  FeedApi (Retrofit)            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚               â†•                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  FeedResponse (DTO)            â”‚ â”‚
â”‚  â”‚  PostDto, AuthorDto, ClipDto   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†•
        Network / Local Storage
```

---

## æ ¸å¿ƒå®ç°

### 2.1 Domainå±‚æ¨¡å‹å®šä¹‰

**æ–‡ä»¶**: `domain/model/Post.kt`

```kotlin

/**
 * ä½œå“ï¼ˆå¸–å­ï¼‰é¢†åŸŸæ¨¡å‹
 */
data class Post(
    val postId: String,
    val title: String,
    val content: String,
    val hashtags: List<Hashtag>,
    val createTime: Long,
    val author: Author,
    val clips: List<Clip>,
    val music: Music?,
    val likeCount: Int = 0,
    val isLiked: Boolean = false
)

```

### 2.2 Domainå±‚DTOå®šä¹‰

**æ–‡ä»¶**: `data/model/FeedResponse.kt`

```kotlin
/**
 * Feedæ¥å£å“åº”
 */
data class FeedResponse(
    @SerializedName("status_code")
    val statusCode: Int,

    @SerializedName("has_more")
    val hasMore: Int,

    @SerializedName("post_list")
    val postList: List<PostDto>?
)

// ==================== Mapper ====================

/**
 * DTO â†’ Domain Model æ˜ å°„
 */
fun PostDto.toDomain(): Post {
}

```

### 2.3 ç½‘ç»œå±‚APIå®šä¹‰

**æ–‡ä»¶**: `data/remote/FeedApi.kt`

```kotlin
/**
 * Feedç›¸å…³APIæ¥å£
 */
interface FeedApi {
    /**
     * è·å–Feedæµ
     * @param count è¯·æ±‚ä½œå“æ•°é‡
     * @param acceptVideoClip æ˜¯å¦æ”¯æŒä¸‹å‘è§†é¢‘ç‰‡æ®µï¼ˆè¿›é˜¶åŠŸèƒ½ï¼‰
     */
    @GET("feed/")
    suspend fun getFeed(
        @Query("count") count: Int,
        @Query("accept_video_clip") acceptVideoClip: Boolean = false
    ): FeedResponse
}
```

### 2.4 Repositoryå®ç°
-- ç”¨äºè°ƒç”¨ apiåŒæ—¶å°†æ¥å£æ•°æ®ç±»å‹ è½¬åŒ–æˆdomainæ•°æ®ç±»å‹

**æ¥å£**: `domain/repository/FeedRepository.kt`

```kotlin
/**
 * Feedæ•°æ®ä»“åº“æ¥å£
 */
interface FeedRepository {
    suspend fun getFeed(count: Int, acceptVideoClip: Boolean = false): Result<List<Post>>
}
```

**å®ç°**: `data/repository/FeedRepositoryImpl.kt`

```kotlin
/**
 * Feedæ•°æ®ä»“åº“å®ç° è°ƒç”¨apiæ¥å£åŒæ—¶å°†æ¥å£æ•°æ®ç±»å‹ è½¬åŒ–æˆdomainæ•°æ®ç±»å‹
 */
```

### 2.5æœ¬åœ°å­˜å‚¨ç®¡ç†

**æ–‡ä»¶**:

```kotlin
/**
 * ç”¨æˆ·åå¥½è®¾ç½®ç®¡ç†ï¼ˆshare preferenceï¼‰- ç‚¹èµå…³æ³¨
 * apiè°ƒç”¨åä½¿ç”¨ Room å­˜å‚¨  è®¿é—®è¯¦æƒ…é¡µæ—¶å–å‡º
 */
```

### 2.6 HomeViewModelå®ç°

**æ–‡ä»¶**: `presentation/home/HomeViewModel.kt`

#### æ¶æ„èŒè´£
HomeViewModelæ˜¯MVVMæ¶æ„ä¸­çš„ViewModelå±‚ï¼Œè´Ÿè´£ï¼š
- **ç®¡ç†UIçŠ¶æ€å’Œæ•°æ®**ï¼šé€šè¿‡StateFlowæŒæœ‰UIçŠ¶æ€å’Œå¸–å­åˆ—è¡¨
- **å¤„ç†ä¸šåŠ¡é€»è¾‘**ï¼šåè°ƒUseCaseè·å–æ•°æ®ï¼Œå¡«å……æœ¬åœ°çŠ¶æ€
- **å“åº”ç”¨æˆ·äº¤äº’**ï¼šå¤„ç†ç‚¹èµã€åˆ·æ–°ã€åŠ è½½æ›´å¤šç­‰æ“ä½œ
- **ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥**ï¼šåœ¨é…ç½®å˜æ›´ï¼ˆå¦‚å±å¹•æ—‹è½¬ï¼‰æ—¶ä¿æŒæ•°æ®

#### çŠ¶æ€ç®¡ç†

**1. UIçŠ¶æ€å®šä¹‰**
```kotlin
sealed class FeedUiState {
    object InitLoading : FeedUiState()      // é¦–æ¬¡åŠ è½½ä¸­
    object Success : FeedUiState()          // åŠ è½½æˆåŠŸ
    object Empty : FeedUiState()            // æ— æ•°æ®
    data class Error(val message: String) : FeedUiState()  // åŠ è½½å¤±è´¥
}
```

> **è®¾è®¡æ¨¡å¼**ï¼šä½¿ç”¨ `MutableStateFlow` (å†…éƒ¨å¯å˜) å’Œ `StateFlow` (å¤–éƒ¨åªè¯») åˆ†ç¦»ï¼Œç¡®ä¿**å•å‘æ•°æ®æµ**

#### æ ¸å¿ƒåŠŸèƒ½å®ç°

**1. é¦–å±åŠ è½½** (presentation/home/HomeViewModel.kt:62-88)
**æµç¨‹**ï¼š
1. è®¾ç½®åŠ è½½çŠ¶æ€ `InitLoading`
2. è°ƒç”¨ `GetFeedUseCase` è·å–20æ¡æ•°æ®
3. ä½¿ç”¨ `fillWithLocalState()` å¡«å……æœ¬åœ°çŠ¶æ€ï¼ˆç‚¹èµã€å…³æ³¨ï¼‰
4. æ›´æ–° `_posts` å’Œ `_uiState`
5. æ ¹æ®æ•°æ®æ˜¯å¦ä¸ºç©ºè®¾ç½® `Empty` æˆ– `Success` çŠ¶æ€

**2. ä¸‹æ‹‰åˆ·æ–°** (presentation/home/HomeViewModel.kt:93-114)
```kotlin
fun refresh() {
    viewModelScope.launch {
        _isRefreshing.value = true
        try {
            val posts = getFeedUseCase(count = 20)
            val postsWithLocalState = fillWithLocalState(posts)
            _posts.value = postsWithLocalState  // å®Œå…¨æ›¿æ¢æ•°æ®
            _uiState.value = if (postsWithLocalState.isEmpty()) {
                FeedUiState.Empty
            } else {
                FeedUiState.Success
            }
        } catch (e: Exception) {
            // åˆ·æ–°å¤±è´¥ä¿æŒå½“å‰æ•°æ®
        } finally {
            _isRefreshing.value = false
        }
    }
}
```

**ç‰¹ç‚¹**ï¼š
- ä½¿ç”¨ç‹¬ç«‹çš„ `isRefreshing` çŠ¶æ€æ§åˆ¶ä¸‹æ‹‰åˆ·æ–°æŒ‡ç¤ºå™¨
- å¤±è´¥æ—¶ä¿æŒç°æœ‰æ•°æ®ä¸å˜ï¼ˆç”¨æˆ·å‹å¥½ï¼‰
- **å®Œå…¨æ›¿æ¢**åˆ—è¡¨æ•°æ®

**3. ä¸Šæ»‘åŠ è½½æ›´å¤š** (presentation/home/HomeViewModel.kt)
```kotlin
fun loadMore() {}
```

**ç‰¹ç‚¹**ï¼š
- é˜²æ­¢é‡å¤åŠ è½½ï¼ˆé€šè¿‡æ ‡å¿—ä½ï¼‰
- å»é‡å¤„ç†ï¼ˆé˜²æ­¢APIè¿”å›é‡å¤æ•°æ®ï¼‰
- **è¿½åŠ æ•°æ®**è€Œéæ›¿æ¢

**4. ç‚¹èµäº¤äº’** (presentation/home/HomeViewModel.kt:148-168)
**æµç¨‹**ï¼š
1. æ‰¾åˆ°ç›®æ ‡å¸–å­
2. åˆ‡æ¢ç‚¹èµçŠ¶æ€
3. æ›´æ–°ç‚¹èµæ•°ï¼ˆ+1/-1ï¼Œæœ€å°ä¸º0ï¼‰
4. **æŒä¹…åŒ–**åˆ° SharedPreferences
5. æ›´æ–°åˆ—è¡¨çŠ¶æ€

#### æœ¬åœ°çŠ¶æ€åŒæ­¥

**ç”¨é€”**ï¼šä» SharedPreferences è¯»å–ç”¨æˆ·çš„ç‚¹èµã€å…³æ³¨çŠ¶æ€ï¼Œå¡«å……åˆ°Postå¯¹è±¡ä¸­
**ç”¨é€”**ï¼šä»è¯¦æƒ…é¡µè¿”å›æ—¶ï¼ŒåŒæ­¥æœ€æ–°çš„æœ¬åœ°çŠ¶æ€ï¼ˆç”¨æˆ·å¯èƒ½åœ¨è¯¦æƒ…é¡µç‚¹èµ/å…³æ³¨ï¼‰

### 2.7 PostCardç»„ä»¶å®ç°
- **æ–‡ä»¶**: `presentation/home/components/PostCard.kt`
- ä½¿ç”¨cardåº“
- 1. å°é¢å›¾ç‰‡/è§†é¢‘
- 2. æ ‡é¢˜/å†…å®¹åŒºåŸŸ
- 3. åº•æ ï¼šä½œè€…ä¿¡æ¯ + ç‚¹èµæŒ‰é’®

---

![postCard.png](E:\code_project\kotlinProject\Croissant\Progress\PostCard.png)

### 2.8 HomeScreenå®ç°

**æ–‡ä»¶**: `presentation/home/HomeScreen.kt`

#### æ•´ä½“ç»“æ„
HomeScreenæ˜¯é¦–é¡µçš„UIå±‚ï¼Œé‡‡ç”¨Jetpack Composeå®ç°ï¼Œç»“æ„å¦‚ä¸‹ï¼š
**UIå±‚çº§**ï¼š
```
Column
â”œâ”€â”€ HomeTabRow (é¡¶éƒ¨Tabæ )
â”œâ”€â”€ HorizontalDivider (åˆ†å‰²çº¿)
â””â”€â”€ Box (Tabå†…å®¹åŒºåŸŸ)
    â””â”€â”€ CommunityTabContent (ç¤¾åŒºTab - ç€‘å¸ƒæµ)
```

#### CommunityTabContentå®ç°

**1. çŠ¶æ€è®¢é˜…** (presentation/home/HomeScreen.kt:114-117)
```kotlin
@Composable
private fun CommunityTabContent() {}
```

> **å“åº”å¼è®¾è®¡**ï¼šä½¿ç”¨ `collectAsState()` å°† `StateFlow` è½¬æ¢ä¸º Compose Stateï¼Œ**è‡ªåŠ¨è§¦å‘UIé‡ç»„**

**2. ä¸‹æ‹‰åˆ·æ–°é…ç½®** (presentation/home/HomeScreen.kt)
```kotlin
val pullRefreshState = rememberPullRefreshState() // æ£€æµ‹ç”¨æˆ·æ‰‹åŠ¿
```

**3. UIçŠ¶æ€æ¸²æŸ“** (presentation/home/HomeScreen.kt:142-214)

ä½¿ç”¨ `when` è¡¨è¾¾å¼æ ¹æ® `uiState` æ¸²æŸ“ä¸åŒUIï¼š

**çŠ¶æ€æµè½¬**ï¼š
```
InitLoading â†’ Success / Empty / Error
     â†‘            â†“
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       (é‡è¯•åŠ è½½)
```

#### åŒåˆ—ç€‘å¸ƒæµå®ç°

**4. LazyVerticalStaggeredGridé…ç½®** (presentation/home/HomeScreen.kt:153-195)
```kotlin
LazyVerticalStaggeredGrid(
    columns = StaggeredGridCells.Fixed(2),  // å›ºå®š2åˆ—
    horizontalArrangement = Arrangement.spacedBy(8.dp),  // åˆ—é—´è·
    verticalItemSpacing = 8.dp,  // è¡Œé—´è·
    contentPadding = PaddingValues(16.dp),  // å†…è¾¹è·
    modifier = Modifier.fillMaxSize()
) {
    // ä½œå“å¡ç‰‡åˆ—è¡¨
}
```

**å…³é”®ç‚¹**ï¼š
- `StaggeredGridCells.Fixed(2)`: å›ºå®š2åˆ—å¸ƒå±€ï¼Œå®ç°ç€‘å¸ƒæµæ•ˆæœ
- `key = { it.postId }`: ä¸ºæ¯ä¸ªitemæä¾›ç¨³å®šçš„å”¯ä¸€keyï¼Œ**ä¼˜åŒ–é‡ç»„æ€§èƒ½**
- `LaunchedEffect(Unit)`: å½“åŠ è½½æ›´å¤šè§¦å‘å™¨å‡ºç°åœ¨å±å¹•ä¸Šæ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨ `loadMore()`
- `StaggeredGridItemSpan.FullLine`: åŠ è½½æ›´å¤šæŒ‡ç¤ºå™¨å æ®æ•´è¡Œ



#### è¾…åŠ©UIç»„ä»¶

**ç©ºæ€é¡µé¢** (presentation/home/HomeScreen.kt:228-249)
**é”™è¯¯æ€é¡µé¢** (presentation/home/HomeScreen.kt:254-285)


---

## ğŸ“Š çŠ¶æ€æ›´æ–°æµç¨‹å›¾

### æ•´ä½“æ¶æ„æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         HomeScreen (UIå±‚)                        
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” 
â”‚  â”‚  è®¢é˜…çŠ¶æ€ (collectAsState)                                    
â”‚  â”‚  - uiState: StateFlow<FeedUiState>                          
â”‚  â”‚  - posts: StateFlow<List<Post>>                             
â”‚  â”‚  - isRefreshing: StateFlow<Boolean>                         
â”‚  â”‚  - isLoadingMore: StateFlow<Boolean>                        
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 
â”‚                           â†‘ (è‡ªåŠ¨é‡ç»„)                            
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” 
â”‚  â”‚  ç”¨æˆ·äº¤äº’                                                    
â”‚  â”‚  - ä¸‹æ‹‰åˆ·æ–° â†’ viewModel.refresh()                          
â”‚  â”‚  - ä¸Šæ»‘åŠ è½½ â†’ viewModel.loadMore()                          
â”‚  â”‚  - ç‚¹èµ â†’ viewModel.toggleLike(postId)                     
â”‚  â”‚  - ç‚¹å‡»å¡ç‰‡ â†’ onNavigateToDetail(postId)                   
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚                    HomeViewModel (ä¸šåŠ¡é€»è¾‘å±‚)                     
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” 
â”‚  â”‚  çŠ¶æ€ç®¡ç†                                                    
â”‚  â”‚  - _uiState.value = xxx                                    
â”‚  â”‚  - _posts.value = xxx                                      
â”‚  â”‚  - _isRefreshing.value = xxx                                
â”‚  â”‚  - _isLoadingMore.value = xxx                               
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 
â”‚                           â†“                                      
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” 
â”‚  â”‚  ä¸šåŠ¡é€»è¾‘                                                      
â”‚  â”‚  - è°ƒç”¨ GetFeedUseCase                                       
â”‚  â”‚  - å¡«å……æœ¬åœ°çŠ¶æ€ fillWithLocalState()                         
â”‚  â”‚  - æŒä¹…åŒ– SharedPreferences                                 
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GetFeedUseCase (ç”¨ä¾‹å±‚)                        
â”‚                           â†“                                      
â”‚                   FeedRepository (æ•°æ®å±‚)                         
â”‚                           â†“                                      
â”‚                    FeedApi (ç½‘ç»œå±‚)                               
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1ï¸âƒ£ é¦–å±åŠ è½½æµç¨‹

```
ç”¨æˆ·å¯åŠ¨åº”ç”¨
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HomeViewModel.init {}   â”‚ â†’ è‡ªåŠ¨è°ƒç”¨ loadFeed()
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. _uiState.value = InitLoading         
â”‚    â†’ UIæ˜¾ç¤º CircularProgressIndicator    
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. getFeedUseCase(count = 20)          
â”‚    â†’ è°ƒç”¨APIè·å–20æ¡å¸–å­                  
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. fillWithLocalState(posts)           
â”‚    â†’ ä»SharedPreferenceså¡«å……ç‚¹èµ/å…³æ³¨çŠ¶æ€
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. _posts.value = postsWithLocalState  
â”‚    _uiState.value = Success/Empty       
â”‚    â†’ UIæ˜¾ç¤ºç€‘å¸ƒæµ/ç©ºæ€                    
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æˆåŠŸï¼šæ˜¾ç¤ºåŒåˆ—ç€‘å¸ƒæµ                       
â”‚ å¤±è´¥ï¼šæ˜¾ç¤ºErrorState + é‡è¯•æŒ‰é’®           
â”‚ ç©ºæ•°æ®ï¼šæ˜¾ç¤ºEmptyState + é‡æ–°åŠ è½½æŒ‰é’®      
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2ï¸âƒ£ ä¸‹æ‹‰åˆ·æ–°æµç¨‹

```
ç”¨æˆ·ä¸‹æ‹‰å±å¹•
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PullRefreshIndicator.onRefresh()       
â”‚    â†’ è§¦å‘ viewModel.refresh()           
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. _isRefreshing.value = true          
â”‚    â†’ UIæ˜¾ç¤ºä¸‹æ‹‰åˆ·æ–°æŒ‡ç¤ºå™¨                 
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. getFeedUseCase(count = 20)          
â”‚    â†’ é‡æ–°è·å–æœ€æ–°               
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. fillWithLocalState(posts)           
â”‚    â†’ å¡«å……æœ¬åœ°çŠ¶æ€                         
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. _posts.value = postsWithLocalState  
â”‚    â†’ å®Œå…¨æ›¿æ¢åˆ—è¡¨æ•°æ®ï¼ˆéè¿½åŠ ï¼‰            
â”‚    _uiState.value = Success/Empty       
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. finally { _isRefreshing.value=false }
â”‚    â†’ éšè—åˆ·æ–°æŒ‡ç¤ºå™¨                       
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æˆåŠŸï¼šåˆ—è¡¨æ›´æ–°ä¸ºæœ€æ–°æ•°æ®                   
â”‚ å¤±è´¥ï¼šä¿æŒå½“å‰æ•°æ®ä¸å˜ï¼ˆç”¨æˆ·å‹å¥½ï¼‰          
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3ï¸âƒ£ ä¸Šæ»‘åŠ è½½æ›´å¤šæµç¨‹

```
ç”¨æˆ·æ»‘åŠ¨åˆ°åº•éƒ¨
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LaunchedEffect(Unit) è§¦å‘               
â”‚    â†’ åŠ è½½æ›´å¤šè§¦å‘å™¨å‡ºç°åœ¨å±å¹•ä¸Š            
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ£€æŸ¥ï¼šif (_isLoadingMore.value) return 
â”‚    â†’ é˜²æ­¢é‡å¤åŠ è½½                         
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. _isLoadingMore.value = true         
â”‚    â†’ UIæ˜¾ç¤ºåº•éƒ¨LoadingæŒ‡ç¤ºå™¨              
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. getFeedUseCase(count = 20)          
â”‚    â†’ è·å–æ–°çš„20æ¡å¸–å­                     
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. fillWithLocalState(newPosts)        
â”‚    â†’ å¡«å……æœ¬åœ°çŠ¶æ€                         
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. å»é‡å¤„ç†                              
â”‚    val existingIds = posts.map{postId} â”‚
â”‚    val uniquePosts = filter{!in Ids}   â”‚
â”‚    â†’ é˜²æ­¢APIè¿”å›é‡å¤æ•°æ®                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. _posts.value += uniquePosts         
â”‚    â†’ è¿½åŠ æ•°æ®åˆ°åˆ—è¡¨æœ«å°¾ï¼ˆéæ›¿æ¢ï¼‰          
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. finally{_isLoadingMore.value=false} 
â”‚    â†’ éšè—LoadingæŒ‡ç¤ºå™¨                   
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æˆåŠŸï¼šåˆ—è¡¨æœ«å°¾è¿½åŠ æ–°æ•°æ®                   
â”‚ å¤±è´¥ï¼šå¿½ç•¥é”™è¯¯ï¼Œä¿æŒå½“å‰æ•°æ®               
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4ï¸âƒ£ ç‚¹èµäº¤äº’æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»ç‚¹èµæŒ‰é’®
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostCard.onLikeClick()                 
â”‚    â†’ è§¦å‘ viewModel.toggleLike(postId)  
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. æŸ¥æ‰¾ç›®æ ‡å¸–å­                          
â”‚    currentPosts.map { if(postId) {...}} 
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. åˆ‡æ¢çŠ¶æ€                              
â”‚    newLikedStatus = !post.isLiked       
â”‚    newLikeCount = isLiked ? +1 : -1     
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. æŒä¹…åŒ–åˆ°SharedPreferences             
â”‚    setLikeStatus(postId, status)        
â”‚    setLikeCount(postId, count)          
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. æ›´æ–°Postå¯¹è±¡                          
â”‚    post.copy(                           
â”‚       isLiked = newLikedStatus,         
â”‚       likeCount = newLikeCount          
â”‚    )                                    
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. _posts.value = updatedPosts         
â”‚    â†’ UIè‡ªåŠ¨é‡ç»„ï¼Œæ˜¾ç¤ºæ–°çš„ç‚¹èµçŠ¶æ€         
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostCard UIæ›´æ–°                         
â”‚ - ç‚¹èµå›¾æ ‡å˜è‰²ï¼ˆçº¢è‰²/ç°è‰²ï¼‰               
â”‚ - ç‚¹èµæ•°å­—æ›´æ–°                           
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5ï¸âƒ£ è¯¦æƒ…é¡µè¿”å›åŒæ­¥æµç¨‹

```
ç”¨æˆ·åœ¨è¯¦æƒ…é¡µç‚¹èµ/å…³æ³¨
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DetailScreen æ›´æ–° SharedPreferences     
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
ç”¨æˆ·è¿”å›é¦–é¡µ
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HomeScreen ç›‘å¬ shouldRefresh ä¿¡å·       
â”‚    LaunchedEffect(refresh) {...}        
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ viewModel.refreshLocalState()           
â”‚    â†’ é‡æ–°ä»SharedPreferencesè¯»å–çŠ¶æ€       
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ _posts.value = fillWithLocalState(posts)â”‚
â”‚    â†’ æ›´æ–°åˆ—è¡¨ä¸­æ‰€æœ‰å¸–å­çš„æœ¬åœ°çŠ¶æ€             
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UIè‡ªåŠ¨é‡ç»„ï¼ŒåŒæ­¥æ˜¾ç¤ºæœ€æ–°çŠ¶æ€                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”„ çŠ¶æ€ç®¡ç†å…³é”®è®¾è®¡

#### å•å‘æ•°æ®æµ (Unidirectional Data Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ç”¨æˆ·äº¤äº’ (Event)                 
â”‚   ä¸‹æ‹‰åˆ·æ–° / ä¸Šæ»‘åŠ è½½ / ç‚¹èµ / ç‚¹å‡»              
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ViewModel å¤„ç† (Action)              
â”‚   viewModel.refresh() / loadMore() / ...     
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          æ›´æ–°çŠ¶æ€ (State Update)               
â”‚   _uiState.value = xxx                       
â”‚   _posts.value = xxx                         
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        StateFlow å‘å°„æ–°çŠ¶æ€ (Emit)             
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      collectAsState() è§¦å‘é‡ç»„ (Recompose)     
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              UI æ›´æ–° (Render)                 
â”‚   æ˜¾ç¤ºLoading / æ˜¾ç¤ºåˆ—è¡¨ / æ˜¾ç¤ºé”™è¯¯              
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
---
### 3.1 DetailScreenå®ç°