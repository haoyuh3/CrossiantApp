# Croissant App - æŠ€æœ¯æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [å®ç°æ–¹æ¡ˆ/æ¡†æ¶ä»‹ç»](#å®ç°æ–¹æ¡ˆæ¡†æ¶ä»‹ç»)
- [ä¸ªäººæ€è€ƒ](#ä¸ªäººæ€è€ƒ)

---

## é¡¹ç›®æ¦‚è¿°

### ä¸šåŠ¡å®šä½

Croissantæ˜¯ä¸€ä¸ªåŸºäºå­—èŠ‚è·³åŠ¨è®­ç»ƒè¥è¯¾é¢˜çš„**UGCå†…å®¹ç¤¾åŒºå®¢æˆ·ç«¯åº”ç”¨**ï¼Œæ¨¡ä»¿å¯é¢‚APPçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œä¸ºç”¨æˆ·æä¾›å›¾æ–‡å†…å®¹çš„æµè§ˆã€äº’åŠ¨å’Œåˆ†äº«ä½“éªŒã€‚

**æ ¸å¿ƒç‰¹ç‚¹ï¼š**
- **äº§å“å®šä½**ï¼šUGCå†…å®¹ç¤¾åŒºï¼Œæ»¡è¶³ç”¨æˆ·ç»éªŒå†³ç­–ã€åœˆå±‚äº¤æµéœ€æ±‚
- **äº§å“å½¢æ€**ï¼šåŒåˆ—å›¾æ–‡è§†é¢‘æ··æ’ï¼Œä»¥å›¾æ–‡ä½“è£ä¸ºä¸»
- **æŠ€æœ¯æ ˆ**ï¼š(Kotlin + Java) + Jetpack Composeå®ç°çš„ç°ä»£åŒ–Androidåº”ç”¨

**ç«äº‰ä¼˜åŠ¿ï¼š**
- åŒåˆ—ç€‘å¸ƒæµå¸ƒå±€ï¼šå±æ•ˆæ¯”é«˜ï¼Œä¸€å±å±•ç¤ºå¤šä¸ªä½œå“ï¼Œä¾¿äºå†…å®¹ç­›é€‰
- å›¾æ–‡ä½“è£ä¸ºä¸»ï¼šä¿¡æ¯å¯†åº¦é«˜ã€å¯æ§æ„Ÿå¼ºã€åˆ›ä½œé—¨æ§›ä½
- ç¦»çº¿ç¼“å­˜æ”¯æŒï¼šæ— ç½‘ç»œç¯å¢ƒä¸‹ä»å¯æµè§ˆå·²ç¼“å­˜å†…å®¹

---

## å®ç°æ–¹æ¡ˆ/æ¡†æ¶ä»‹ç»

### åŠŸèƒ½å®Œæˆåº¦æ€»è§ˆ

æ ¹æ®è®­ç»ƒè¥è¯¾é¢˜è¦æ±‚ï¼Œä»¥ä¸‹æ˜¯å„åŠŸèƒ½æ¨¡å—çš„å®ç°æƒ…å†µï¼š

#### åŸºç¡€åŠŸèƒ½å®Œæˆåº¦

| åŠŸèƒ½æ¨¡å— | å­æ¨¡å—      | å®ŒæˆçŠ¶æ€ | å®ç°ä½ç½® | å¤‡æ³¨ |
|---------|----------|---------|----------|------|
| **åº”ç”¨æ¡†æ¶** | åº•éƒ¨å¯¼èˆªæ     | âœ… å·²å®Œæˆ | `BottomNavigationBar.kt` | æ”¯æŒ"é¦–é¡µ"å’Œ"æˆ‘"åˆ‡æ¢ |
| | é¦–é¡µTab    | âœ… å·²å®Œæˆ | `HomeTabItem.kt` | é»˜è®¤"ç¤¾åŒº"Tabï¼Œå…¶ä»–Tabå ä½ |
| **åŒåˆ—ç€‘å¸ƒæµ** | åŒåˆ—æ¡†æ¶     | âœ… å·²å®Œæˆ | `HomeScreen.kt:153-195` | LazyVerticalStaggeredGridå®ç° |
| | ä¸‹æ‹‰åˆ·æ–°     | âœ… å·²å®Œæˆ | `HomeScreen.kt` | PullRefreshå®ç° |
| | ä¸Šæ»‘LoadMore | âœ… å·²å®Œæˆ | `HomeViewModel.kt` | è§¦åº•è‡ªåŠ¨åŠ è½½ |
| | é¦–åˆ·å¤±è´¥ç©ºæ€   | âœ… å·²å®Œæˆ | `HomeScreen.kt` | ErrorçŠ¶æ€å¤„ç† |
| | Loadingæç¤º | âœ… å·²å®Œæˆ | `HomeScreen.kt` | LoadingçŠ¶æ€å±•ç¤º |
| | ä½œå“å¡ç‰‡     | âœ… å·²å®Œæˆ | `PostCard.kt` | å°é¢+æ ‡é¢˜+ä½œè€…+ç‚¹èµ |
| | å°é¢è£åˆ‡è§„åˆ™   | âœ… å·²å®Œæˆ | `PostCard.kt` | 3:4 ~ 4:3å®½é«˜æ¯”é™åˆ¶ |
| | æ ‡é¢˜å±•ç¤º     | âœ… å·²å®Œæˆ | `PostCard.kt` | æœ€é•¿2è¡Œï¼Œè¶…å‡ºæˆªæ–­ |
| | ç‚¹èµäº¤äº’     | âœ… å·²å®Œæˆ | `PostCard.kt` | æœ¬åœ°æŒä¹…åŒ–å­˜å‚¨ |
| **è¯¦æƒ…é¡µ** | é¡¶éƒ¨ä½œè€…åŒº    | âœ… å·²å®Œæˆ | `DetailTopBar.kt` | è¿”å›+ä½œè€…ä¿¡æ¯+å…³æ³¨æŒ‰é’® |
| | å…³æ³¨åŠŸèƒ½     | âœ… å·²å®Œæˆ | `DetailViewModel.kt:97-123` | SP+RoomåŒå†™ |
| | åº•éƒ¨äº¤äº’åŒº    | âœ… å·²å®Œæˆ | `DetailBottomBar.kt` | è¯„è®ºæ¡†+ç‚¹èµ+è¯„è®º+æ”¶è—+åˆ†äº« |
| | ç‚¹èµäº¤äº’     | âœ… å·²å®Œæˆ | `DetailViewModel.kt:76-95` | SPæŒä¹…åŒ– |
| | åˆ†äº«äº¤äº’     | âš ï¸ éƒ¨åˆ†å®Œæˆ | `DetailBottomBar.kt` | ä»…æ‰“å°æ—¥å¿— |
| | æ¨ªæ»‘å®¹å™¨     | âœ… å·²å®Œæˆ | `DetailContent.kt:86-134` | HorizontalPagerå®ç° |
| | å®¹å™¨å®½é«˜æ¯”    | âœ… å·²å®Œæˆ | `DetailContent.kt:99` | ä½¿ç”¨é¦–å›¾æ¯”ä¾‹ï¼Œ3:4~16:9é™åˆ¶ |
| | å›¾ç‰‡åˆ‡æ¢     | âœ… å·²å®Œæˆ | `DetailContent.kt` | æ”¯æŒæ‰‹åŠ¨æ¨ªæ»‘ |
| | åŠ è½½æ€/å¤±è´¥æ€  | âœ… å·²å®Œæˆ | `DetailContent.kt:112-126` | SubcomposeAsyncImageå®ç° |
| | è¿›åº¦æ¡      | âœ… å·²å®Œæˆ | `DetailContent.kt:140-149` | æ¡çŠ¶è¿›åº¦ï¼Œè·Ÿéšæ»‘åŠ¨ |
| | æ ‡é¢˜åŒº      | âœ… å·²å®Œæˆ | `DetailContent.kt:48-54` | å®Œæ•´å±•ç¤ºä¸æˆªæ–­ |
| | æ­£æ–‡åŒº      | âœ… å·²å®Œæˆ | `DetailContent.kt:58-64` | å®Œæ•´å±•ç¤ºä¸æˆªæ–­ |
| | è¯é¢˜è¯é«˜äº®    | âœ… å·²å®Œæˆ | `DetailContent.kt:154-217` | ClickableTextå®ç° |
| | è¯é¢˜è¯ç‚¹å‡»    | âœ… å·²å®Œæˆ | `HashtagScreen.kt` | è·³è½¬è¯é¢˜é¡µé¢ |
| | å‘å¸ƒæ—¥æœŸ     | âœ… å·²å®Œæˆ | `DetailContent.kt:69-73` + `DateUtil.kt` | ç›¸å¯¹æ—¶é—´æ ¼å¼åŒ– |
| **ä¸ªäººä¸»é¡µ** | ä¸ªäººä¿¡æ¯å±•ç¤º   | âœ… å·²å®Œæˆ | `ProfileScreen.kt` | å¤´åƒ+æ˜µç§°+ç®€ä»‹ |
| | ç»Ÿè®¡æ•°æ®     | âœ… å·²å®Œæˆ | `ProfileScreen.kt:92-123` | å…³æ³¨/ç²‰ä¸/è·èµï¼ˆå ä½æ•°æ®ï¼‰ |
| | å¤´åƒç¼–è¾‘     | âœ… å·²å®Œæˆ | `ProfileScreen.kt:150-169` | å›¾ç‰‡é€‰æ‹©å™¨ |
| | æ˜µç§°/ç®€ä»‹ç¼–è¾‘  | âœ… å·²å®Œæˆ | `ProfileScreen.kt:254-333` | Dialogç¼–è¾‘ |

#### è¿›é˜¶åŠŸèƒ½å®Œæˆåº¦

| åŠŸèƒ½æ¨¡å— | å­æ¨¡å— | å®ŒæˆçŠ¶æ€ | å®ç°ä½ç½® | å¤‡æ³¨ |
|---------|--------|---------|----------|------|
| **é¡µé¢è½¬åœº** | è½¬åœºåŠ¨ç”» | âŒ æœªå®ç° | - | ç‚¹å‡»è¿›åœº/é€€åœºã€ä¾§æ»‘è·Ÿæ‰‹ |
| **è¯¦æƒ…é¡µ** | èƒŒæ™¯éŸ³ä¹ | âŒ æœªå®ç° | - | é™éŸ³æŒ‰é’®ã€æ’­æ§é€»è¾‘ã€çŠ¶æ€è®°å¿† |
| | è‡ªåŠ¨è½®æ’­ | âŒ æœªå®ç° | - | å›¾ç‰‡è‡ªåŠ¨åˆ‡æ¢ |
| | è§†é¢‘ç‰‡æ®µ | âœ… å·²å®Œæˆ | `VideoPlayer.kt` | ExoPlayerå®ç° |

#### è‡ªç”±æ¢ç´¢å®Œæˆåº¦

| æ€è€ƒæ–¹å‘ | å®ŒæˆçŠ¶æ€ | å®ç°ä½ç½® | è¯´æ˜                       |
|---------|---------|----------|--------------------------|
| **ä½“éªŒä¼˜åŒ–** | âœ… å·²å®Œæˆ | å¤šå¤„ä¼˜åŒ– | -                        |
| ç¦»çº¿/å¼±ç½‘ä½“éªŒ | âœ… å·²å®Œæˆ | `FeedRepositoryImpl.kt` | ç¦»çº¿ä¼˜å…ˆç­–ç•¥ï¼ŒRoomç¼“å­˜ï¼ŒLoadMoreæŠ¥é”™ |
| å›¾ç‰‡åŠ è½½ä¼˜åŒ– | âœ… å·²å®Œæˆ | å…¨å±€ | Coilå¼‚æ­¥åŠ è½½+ç¼“å­˜              |
| åˆ—è¡¨æ»‘åŠ¨ä¼˜åŒ– | âœ… å·²å®Œæˆ | `HomeScreen.kt` | LazyList Keyä¼˜åŒ–           |
| è§†é¢‘æ’­æ”¾æ”¯æŒ | âœ… å·²å®Œæˆ | `VideoPlayer.kt` | Media3 ExoPlayer         |
| è¯é¢˜é¡µé¢ | âœ… å·²å®Œæˆ | `HashtagScreen.kt` | è¯é¢˜è¯ç‚¹å‡»è·³è½¬                  |

#### åŠŸèƒ½å®Œæˆç»Ÿè®¡

| ç±»åˆ« | æ€»è®¡ | å·²å®Œæˆ | æœªå®Œæˆ | éƒ¨åˆ†å®Œæˆ | å®Œæˆç‡ |
|------|------|--------|--------|----------|--------|
| **åŸºç¡€åŠŸèƒ½** | 30 | 28 | 1 | 1 | 93% |
| **è¿›é˜¶åŠŸèƒ½** | 4 | 1 | 3 | 0 | 25% |
| **è‡ªç”±æ¢ç´¢** | 6 | 6 | 0 | 0 | 100% |
| **æ€»è®¡** | 40 | 35 | 4 | 1 | 87.5% |

---

### 1. æ•´ä½“æ¶æ„è®¾è®¡

#### 1.1 æ¶æ„æ¨¡å¼ï¼šMVVM + Clean Architecture

æœ¬é¡¹ç›®é‡‡ç”¨**MVVMï¼ˆModel-View-ViewModelï¼‰**æ¶æ„æ¨¡å¼ï¼Œå®ç°é«˜å†…èšã€ä½è€¦åˆçš„ä»£ç ç»“æ„ã€‚
```
app/src/main/java/com/bytedance/crossiantapp/
â”œâ”€â”€ data/              # æ•°æ®å±‚
|
â”œâ”€â”€ domain/           # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ model/        # é¢†åŸŸæ¨¡å‹
â”‚   â”œâ”€â”€ repository/   # Repositoryæ¥å£
â”‚   â””â”€â”€ usecase/      # ç”¨ä¾‹
â”œâ”€â”€ presentation/     # è¡¨ç°å±‚
â”‚   â”œâ”€â”€ home/         # é¦–é¡µï¼ˆåŒåˆ—ç€‘å¸ƒæµï¼‰
â”‚   â”œâ”€â”€ detail/       # è¯¦æƒ…é¡µ
â”‚   â”œâ”€â”€ profile/      # ä¸ªäººä¸»é¡µ
â”‚   â”œâ”€â”€ navigation/   # å¯¼èˆª
â”‚   â””â”€â”€ components/   # é€šç”¨ç»„ä»¶
â”œâ”€â”€ di/               # ä¾èµ–æ³¨å…¥
â””â”€â”€ util/             # å·¥å…·ç±»
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€-â”
â”‚                    Presentation Layer                    |
â”‚  (UI/ViewModel - Jetpack Compose + StateFlow)            |
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           |
â”‚  â”‚HomeScreen â”‚  â”‚DetailScn â”‚  â”‚ProfileScreen â”‚           |
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           |
â”‚        â”‚             â”‚                â”‚                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”           |
â”‚  â”‚HomeVM     â”‚  â”‚DetailVM  â”‚  â”‚ProfileVM     â”‚           |
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           |
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€-|
         â”‚             â”‚                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Domain Layer                        | 
â”‚  (Business Logic - Pure Kotlin)                         |
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  UseCases    â”‚  â”‚  Repository Interface  â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚GetFeedUseCaseâ”‚  â”‚  FeedRepository        â”‚           â”‚
â”‚  â”‚GetDetailUse..â”‚  â”‚  - getFeed()           â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€--|
          â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Data Layer                        â”‚
â”‚  (Data Sources - Network + Local Storage)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚FeedRepoImpl â”‚  â”‚  FeedApi     â”‚  â”‚ PostDao      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  (Retrofit)  â”‚  â”‚ (Room DB)    â”‚  â”‚
â”‚        â”‚          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚        â”‚                 â”‚                  â”‚         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Data Mapping: DTO â†” Domain Model â†” Entity       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å„å±‚èŒè´£ï¼š**

| å±‚çº§ | èŒè´£ | å…³é”®ç»„ä»¶ | ä¾èµ–å…³ç³» |
|------|------|----------|----------|
| **Presentation** | UIæ¸²æŸ“ã€ç”¨æˆ·äº¤äº’ã€çŠ¶æ€ç®¡ç† | Composableå‡½æ•°ã€ViewModelã€StateFlow | ä¾èµ–Domainå±‚ |
| **Domain** | ä¸šåŠ¡é€»è¾‘ã€æ•°æ®åè°ƒã€ç”¨ä¾‹ç¼–æ’ | UseCaseã€Repositoryæ¥å£ã€é¢†åŸŸæ¨¡å‹ |
| **Data** | æ•°æ®è·å–ã€æŒä¹…åŒ–ã€ç½‘ç»œè¯·æ±‚ | APIã€DAOã€Repositoryå®ç°ã€Mapper | å®ç°Domainæ¥å£ |
---

#### 1.2 æ ¸å¿ƒæŠ€æœ¯æ ˆ

| æŠ€æœ¯é¢†åŸŸ | æ¡†æ¶/åº“ | ç‰ˆæœ¬ | ç”¨é€”è¯´æ˜                |
|---------|---------|------|---------------------|
| **æ„å»ºå·¥å…·** | Gradle | 8.13.1 | é¡¹ç›®æ„å»ºå’Œä¾èµ–ç®¡ç†           |
| **ç¼–ç¨‹è¯­è¨€** | Kotlin | 2.0.21 | ä¸»è¯­è¨€ï¼ŒKotlin, Javaå®ç°  |
| **UIæ¡†æ¶** | Jetpack Compose | 2024.09.00 | å£°æ˜å¼UIï¼ŒMaterial3è®¾è®¡   |
| **ä¾èµ–æ³¨å…¥** | Hilt | 2.48 | ä¾èµ–ç®¡ç†å’Œå¯¹è±¡æä¾›           |
| **ç½‘ç»œè¯·æ±‚** | Retrofit | 2.11.0 | RESTful APIè°ƒç”¨       |
| **JSONè§£æ** | Gson | 2.10.1 | æ•°æ®åºåˆ—åŒ–/ååºåˆ—åŒ–          |
| **æœ¬åœ°æ•°æ®åº“** | Room | 2.6.1 | SQLiteæŠ½è±¡å±‚ï¼Œç¦»çº¿ç¼“å­˜      |
| **å›¾ç‰‡åŠ è½½** | Coil | 2.5.0 | Composeä¸“ç”¨å›¾ç‰‡åŠ è½½åº“      |
| **å¼‚æ­¥ç¼–ç¨‹** | Coroutines | 1.7.3 | åç¨‹å¤„ç†å¼‚æ­¥æ“ä½œ            |
| **ç”Ÿå‘½å‘¨æœŸ** | Lifecycle | 2.8.7 | ViewModelã€LiveDataç­‰ |
| **å¯¼èˆª** | Navigation Compose | 2.8.5 | å•Activityå¤šå±å¹•å¯¼èˆª      |
| **åª’ä½“æ’­æ”¾** | Media3 (ExoPlayer) | 1.2.0 | è§†é¢‘æ’­æ”¾æ”¯æŒ              |

---

### 2. æ•°æ®æµæ¶æ„

#### 2.1 å•å‘æ•°æ®æµï¼ˆUnidirectional Data Flowï¼‰

æœ¬é¡¹ç›®ä¸¥æ ¼éµå¾ª**å•å‘æ•°æ®æµ**åŸåˆ™ï¼Œç¡®ä¿æ•°æ®æµåŠ¨çš„å¯é¢„æµ‹æ€§å’Œå¯è¿½æº¯æ€§ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER INTERACTION                   
â”‚         (ç‚¹å‡»ã€æ»‘åŠ¨ã€è¾“å…¥ç­‰ç”¨æˆ·æ“ä½œ)                       
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   VIEW (Composable)                   
â”‚- viewModel.loadFeed()                                 
â”‚- viewModel.toggleLike(postId)                         
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      VIEWMODEL                        â”‚
â”‚   - è°ƒç”¨UseCaseæ‰§è¡Œä¸šåŠ¡é€»è¾‘                              
â”‚   - æ›´æ–°MutableStateFlow                               
â”‚   - _uiState.value = newState                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
â”‚                 USE CASE                         
â”‚- åè°ƒRepositoryè·å–æ•°æ® ä¸šåŠ¡å¤„ç†                     
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      REPOSITORY                       
â”‚- å†³ç­–æ•°æ®æºï¼ˆNetworkä¼˜å…ˆ â†’ Cacheé™çº§ï¼‰                    
â”‚- æ•°æ®è½¬æ¢ï¼ˆDTO â†’ Domain Modelï¼‰                         
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   NETWORK    â”‚        â”‚ LOCAL CACHE  â”‚
â”‚   (Retrofit) â”‚        â”‚ (Room + SP)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DATA MAPPING                        â”‚
â”‚   - PostDto â†’ Post (Domain Model)                     â”‚
â”‚   - Post â†’ PostEntity (Database Entity)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               COMPOSE RECOMPOSITION                   
â”‚   - collectAsState()ç›‘å¬StateFlow                      
â”‚   - çŠ¶æ€å˜åŒ–è§¦å‘UIé‡ç»„                                   
â”‚   - è‡ªåŠ¨æ›´æ–°ç•Œé¢æ˜¾ç¤º                                     
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
---

#### 2.2 æ•°æ®åŠ è½½
æœ¬åœ°çŠ¶æ€å¡«å……é€»è¾‘ï¼šä½¿ç”¨share preferenceå¡«å……ç‚¹èµå…³æ³¨æ•°æ®
HomeScreenå’ŒDetailScreen ç›´æ¥ä¼ é€’Postå¯¹è±¡æ¸²æŸ“UI
æœ¬åº”ç”¨å®ç°äº†åŸºç¡€çš„ç¦»çº¿ä¼˜å…ˆç­–ç•¥,ç¡®ä¿åœ¨æ— ç½‘ç»œç¯å¢ƒä¸‹ä»èƒ½æä¾›åŸºæœ¬åŠŸèƒ½ï¼š

**ç¼“å­˜ç­–ç•¥ï¼š**
HomeViewModel åˆæ¬¡åŠ è½½æ—¶å°†å¸–å­å­˜å…¥æ•°æ®åº“ã€‚ å½“æ— ç½‘ç»œæ‰“å¼€æ—¶ä¼˜å…ˆä»æ•°æ®åº“ä¸­è·å–å¸–å­ã€‚

| æ•°æ®ç±»å‹ | ä¸»å­˜å‚¨ | è¾…åŠ©å­˜å‚¨ | åŒæ­¥ç­–ç•¥ |
|---------|--------|----------|----------|
| **Feedåˆ—è¡¨** | Room Database | - | æ¯æ¬¡APIæˆåŠŸåæ›¿æ¢ |
| **ç‚¹èµçŠ¶æ€** | SharedPreferences | - | ç”¨æˆ·æ“ä½œç«‹å³å†™å…¥ |
| **å…³æ³¨çŠ¶æ€** | SharedPreferences | Room (FollowedUserè¡¨) | SPç«‹å³å†™å…¥ï¼ŒRoomå¼‚æ­¥åŒæ­¥ |
| **ç‚¹èµæ•°** | SharedPreferences | - | æœ¬åœ°è®¡ç®—ç»´æŠ¤ |

#### 2.3 æ•°æ®å±‚åŠŸèƒ½

| åŠŸèƒ½é¡¹ | æŠ€æœ¯è¦ç‚¹                        |
|--------|-----------------------------|
| **Roomæ•°æ®åº“** | postsè¡¨ + followed_usersè¡¨    |
| **SharedPreferences** | ç‚¹èµ/å…³æ³¨çŠ¶æ€ + ç”¨æˆ·èµ„æ–™              |
| **DTOæ˜ å°„** | PostDto â†” Post â†” PostEntity |

PostDto: åºåˆ—åŒ–Apiè°ƒç”¨ç»“æœ - FeedResponse.kt
Post: é¢†åŸŸæ¨¡å‹ - Post.kt
PostEntity: æ•°æ®åº“å®ä½“ - PostEntity.kt

---

### 3. UIæ¶æ„è®¾è®¡

#### Jetpack Compose

ä½¿ç”¨**Jetpack Compose**æ„å»ºUIï¼Œæ‘’å¼ƒä¼ ç»ŸXMLå¸ƒå±€ï¼š
#### UIç»„ä»¶åº“
| ç»„ä»¶å                     | åŠŸèƒ½æè¿°              | å¤ç”¨åœºæ™¯ | æ–‡ä»¶ä½ç½® |
|-------------------------|-------------------|----------|----------|
| **PostCard**            | å¸–å­å¡ç‰‡ï¼ˆå°é¢+æ ‡é¢˜+ä½œè€…+ç‚¹èµï¼‰ | é¦–é¡µFeedæµ | `PostCard.kt` |
| **BottomNavigationBar** | åº•éƒ¨å¯¼èˆªæ ï¼ˆ5ä¸ªTabï¼‰      | MainActivity | `BottomNavigationBar.kt` |
| **HomeTabRow**          | é¡¶éƒ¨Tabæ ï¼ˆ5ä¸ªTabï¼‰     | é¦–é¡µ | `HomeTabItem.kt` |
| **DetailTopBar**        | è¯¦æƒ…é¡µé¡¶æ ï¼ˆè¿”å›+ä½œè€…+å…³æ³¨ï¼‰   | è¯¦æƒ…é¡µ | `DetailTopBar.kt` |
| **DetailContent**       | è¯¦æƒ…é¡µå†…å®¹             | è¯¦æƒ…é¡µ | `DetailContent.kt` |
| **DetailBottomBar**     | è¯¦æƒ…é¡µåº•æ ï¼ˆè¯„è®ºæ¡†+æ“ä½œæŒ‰é’®ï¼‰   | è¯¦æƒ…é¡µ | `DetailBottomBar.kt` |
| **VideoPlayer**         | è§†é¢‘æ’­æ”¾å™¨ç»„ä»¶           | è¯¦æƒ…é¡µã€Feedæµ | `VideoPlayer.kt` |
|**HomeScreen**           | é¦–é¡µä¸»ç•Œé¢               | MainActivity | `HomeScreen.kt` |
|**DetailScreen**         | è¯¦æƒ…é¡µä¸»ç•Œé¢               | MainActivity | `DetailScreen.kt` |
|**ProfileScreen**        | ä¸ªäººä¸­å¿ƒ               | MainActivity | `ProfileScreen.kt` |
---

#### 3.1 MainActivity
| åŠŸèƒ½é¡¹                           | æŠ€æœ¯è¦ç‚¹         | æ–‡ä»¶ä½ç½®                     |
|-------------------------------|--------------|--------------------------|
| **bottomBar**                 | åº•éƒ¨å¯¼èˆªæ ï¼ˆ5ä¸ªTabï¼‰ | `BottomNavigationBar.kt` |
| **NavGraph**                  | æ ¹æ®åº•éƒ¨è·¯ç”±æ¸²æŸ“UIç”»é¢ | `NavGraph.kt`            |
---
#### 3.2 é¦–é¡µTab
- **Tabåˆ—è¡¨**ï¼ˆä»å·¦åˆ°å³ï¼‰ï¼šåŒ—äº¬ã€å›¢è´­ã€å…³æ³¨ã€ç¤¾åŒºã€æ¨è
- **å®ç°è¦æ±‚**ï¼š
    - é»˜è®¤ä½äº"ç¤¾åŒº"
    - å…¶ä»–Tabæ— éœ€æ”¯æŒç‚¹å‡»
- Tab Row + å†…å®¹åŒºåŸŸ
- å®ç°HomeTabRow
---
#### 3.3 å®¶é¡µé¢
**UIå±‚çº§**ï¼š
```
Column
â”œâ”€â”€ HomeTabRow (é¡¶éƒ¨Tabæ )
â”œâ”€â”€ HorizontalDivider (åˆ†å‰²çº¿)
â””â”€â”€ Box (Tabå†…å®¹åŒºåŸŸ)
    â””â”€â”€ CommunityTabContent (ç¤¾åŒºTab - ç€‘å¸ƒæµ)
```
| åŠŸèƒ½é¡¹    | æŠ€æœ¯è¦ç‚¹ | æ–‡ä»¶ä½ç½® |
|--------|----------|-------|
| **HomeTabRow** | é¡¶éƒ¨Tabæ ï¼ˆ5ä¸ªTabï¼‰| `HomeTabItem.kt` |
| **CommunityTabContent** | ç¤¾åŒºTabå†…å®¹ï¼ˆé»˜è®¤Tabï¼‰ | `HomeScreen.kt` |
| **lazyVerticalStaggeredGrid** | åŒåˆ—ç€‘å¸ƒæµ | `HomeScreen.kt` |
| **PostCard** | å¸–å­å¡ç‰‡ï¼ˆå°é¢+æ ‡é¢˜+ä½œè€…+ç‚¹èµï¼‰ | `PostCard.kt` |


#### PostCardç»„ä»¶å®ç°
- **æ–‡ä»¶**: `presentation/home/components/PostCard.kt`
- ä½¿ç”¨cardåº“
- 1. å°é¢å›¾ç‰‡/è§†é¢‘
- 2. æ ‡é¢˜/å†…å®¹åŒºåŸŸ
- 3. åº•æ ï¼šä½œè€…ä¿¡æ¯ + ç‚¹èµæŒ‰é’®
---
![postCard.png](https://github.com/haoyuh3/CrossiantApp/blob/d9b6ecf0be38c5d9e7b8cd02087976d2bc76e6b2/Progress/PostCard.png)
---

#### åŒåˆ—ç€‘å¸ƒæµå®ç°

**LazyVerticalStaggeredGridé…ç½®** (presentation/home/HomeScreen.kt:153-195)
- ä½¿ç”¨LazyVerticalStaggeredGridç»„ä»¶
---
#### VideoPlayerå®ç°
- ä½¿ç”¨ExoPlayerç»„ä»¶
- è‡ªåŠ¨åˆ›å»ºä¸é‡Šæ”¾: ä½¿ç”¨ remember æ¥åˆ›å»ºå’Œä¿ç•™ ExoPlayer å®ä¾‹ï¼Œç¡®ä¿åœ¨ videoUrl å˜åŒ–æ—¶é‡æ–°åˆ›å»ºæ’­æ”¾å™¨ï¼Œ
- Composable ç¦»å¼€å±å¹•æ—¶è°ƒç”¨ exoPlayer.release()ï¼Œæœ‰æ•ˆåœ°é˜²æ­¢äº†å†…å­˜æ³„æ¼
- åŠ è½½çŠ¶æ€: åœ¨è§†é¢‘ç¼“å†²ï¼ˆPlayer.STATE_BUFFERINGï¼‰æ—¶ï¼Œä¼šæ˜¾ç¤ºä¸€ä¸ªå¸¦åŠé€æ˜é»‘è‰²èƒŒæ™¯çš„ CircularProgressIndicator
- é”™è¯¯å¤„ç†: å½“æ’­æ”¾å™¨è¿›å…¥ç©ºé—²çŠ¶æ€æ—¶ï¼Œä¼šæ˜¾ç¤ºä¸€ä¸ªé»‘å±å’Œâ€œè§†é¢‘åŠ è½½å¤±è´¥â€çš„æ–‡æœ¬æç¤ºï¼Œæä¾›äº†æ¸…æ™°çš„é”™è¯¯åé¦ˆ
  ![VideoPlayer.png](https://github.com/haoyuh3/CrossiantApp/blob/83cb9633a8aba968dd2914b395e2e9c2981a524d/Progress/VideoPlayer.png)
---

#### HomeViewModel
**1. é¦–å±åŠ è½½**
**æµç¨‹**ï¼š
1. è®¾ç½®åŠ è½½çŠ¶æ€ `InitLoading`
2. è°ƒç”¨ `GetFeedUseCase` è·å–20æ¡æ•°æ®
3. ä½¿ç”¨ `fillWithLocalState()` å¡«å……æœ¬åœ°çŠ¶æ€ï¼ˆç‚¹èµã€å…³æ³¨ï¼‰
4. æ›´æ–° `_posts` å’Œ `_uiState`
5. æ ¹æ®æ•°æ®æ˜¯å¦ä¸ºç©ºè®¾ç½® `Empty` æˆ– `Success` çŠ¶æ€

**2. PullRefresh åŠŸèƒ½å®ç°ï¼š** (presentation/home/HomeViewModel.kt:93-114)
```kotlin
 // ä¸‹æ‹‰åˆ·æ–°çŠ¶æ€ï¼šè¿æ¥æ‰‹åŠ¿å’ŒU
val pullRefreshState = rememberPullRefreshState(
    refreshing = isRefreshing,
    onRefresh = { viewModel.refresh() }
)
```
- HomeScreenæ•æ‰æ‰‹åŠ¿å˜åŒ–ï¼Œå¼‚æ­¥æ”¹å˜çŠ¶æ€
- HomeViewModelæ‰§è¡Œåˆ·æ–°é€»è¾‘
---
**3. LoadMore åŠŸèƒ½å®ç°ï¼š** (presentation/home/HomeViewModel.kt)
- åŒåˆ—ç€‘å¸ƒæµä¸‹æ–¹æ”¾ç½®ä¸€ä¸ªåŠ è½½æ›´å¤šç»„ä»¶ã€‚å½“composeé‡ç»„åŠ è½½æ›´å¤šç»„ä»¶ï¼ŒUIçŠ¶æ€æ›´æ–°
- HomeViewModelè°ƒç”¨loadMoreé€»è¾‘

---
#### 3.4 å¸–å­è¯¦æƒ…æ¨¡å—

| åŠŸèƒ½é¡¹ | æŠ€æœ¯è¦ç‚¹                            | æ–‡ä»¶ä½ç½® |
|--------|---------------------------------|----------|
| è¯¦æƒ…é¡µå¯¼èˆª | Navigation Compose + postIdå‚æ•°ä¼ é€’ | `NavGraph.kt` |
| æ•°æ®åŠ è½½ | HomeScreenä¼ é€’å¯¹è±¡                  | `DetailViewModel.kt:41-74` |
| æ¨ªæ»‘å›¾ç‰‡è½®æ’­ | `HorizontalPager` + è¿›åº¦æŒ‡ç¤ºå™¨       | `DetailContent.kt:86-134` |
| å®½é«˜æ¯”è‡ªé€‚åº” | è¯»å–`Clip.displayAspectRatio`åŠ¨æ€è®¾ç½® | `DetailContent.kt:99` |
| ç‚¹èµäº¤äº’ | å³æ—¶UIæ›´æ–° + SharedPreferencesæŒä¹…åŒ–   | `DetailViewModel.kt:76-95` |
| å…³æ³¨åŠŸèƒ½ | UIæ›´æ–° + SP + RoomåŒå†™              | `DetailViewModel.kt:97-123` |
| ä½œè€…ä¿¡æ¯å±•ç¤º | å¤´åƒ + æ˜µç§° + å…³æ³¨æŒ‰é’®                  | `DetailTopBar.kt:22-82` |
| åº•éƒ¨æ“ä½œæ  | è¯„è®ºæ¡†(ç¦ç”¨) + ç‚¹èµ/è¯„è®º/æ”¶è—/åˆ†äº«æŒ‰é’®         | `DetailBottomBar.kt:23-119` |
---
#### æ•´ä½“å¸ƒå±€ç»“æ„

**å¤–å±‚å®¹å™¨**
- ä½¿ç”¨Columnä½œä¸ºä¸»å®¹å™¨ï¼Œè®¾ç½®fillMaxSizeå¡«å……å¯ç”¨ç©ºé—´
- æ·»åŠ verticalScrollä¿®é¥°ç¬¦ï¼Œä½¿æ•´ä¸ªå†…å®¹åŒºåŸŸå¯ä¸Šä¸‹æ»šåŠ¨
- æ»šåŠ¨çŠ¶æ€ç”±rememberScrollState()ç®¡ç†

**å¸ƒå±€å±‚æ¬¡**ï¼ˆä»ä¸Šåˆ°ä¸‹ï¼‰ï¼š
1. **æ¨ªæ»‘åª’ä½“åŒºåŸŸ**ï¼šImagePagerSectionç»„ä»¶æ˜¾ç¤ºå›¾ç‰‡/è§†é¢‘è½®æ’­
2. **å†…å®¹åŒºåŸŸ**ï¼šåŒ…è£¹åœ¨å¸¦æ°´å¹³paddingçš„Columnä¸­
    - æ ‡é¢˜åŒºåŸŸï¼šæ˜¾ç¤ºpost.title
    - æ­£æ–‡åŒºåŸŸï¼šHashtagTextç»„ä»¶æ˜¾ç¤ºå¸¦è¯é¢˜é«˜äº®çš„å†…å®¹
    - æ—¶é—´åŒºåŸŸï¼šæ˜¾ç¤ºæ ¼å¼åŒ–çš„å‘å¸ƒæ—¶é—´
3. **åº•éƒ¨ç•™ç™½**ï¼šé¿å…å†…å®¹è¢«BottomBaré®æŒ¡
   ![detail.image](https://github.com/haoyuh3/CrossiantApp/blob/b428012a7e6a35b8993e9b32c2105aeb4c8a896e/Progress/DetailScreen.png)
---

#### 3.5ä¸ªäººä¸­å¿ƒæ¨¡å—

| åŠŸèƒ½é¡¹ | æŠ€æœ¯è¦ç‚¹ | æ–‡ä»¶ä½ç½® |
|--------|----------|----------|
| ä¸ªäººä¿¡æ¯å±•ç¤º | å¤´åƒ + æ˜µç§° + ç®€ä»‹ | `ProfileScreen.kt:34-124` |
| ç»Ÿè®¡æ•°æ®å±•ç¤º | å…³æ³¨/ç²‰ä¸/è·èµæ•°ï¼ˆå ä½æ•°æ®ï¼‰ | `ProfileScreen.kt:92-123` |
| å¤´åƒç¼–è¾‘ | å›¾ç‰‡é€‰æ‹©å™¨ + URIæƒé™æŒä¹…åŒ– | `ProfileScreen.kt:150-169` |
| æ˜µç§°/ç®€ä»‹ç¼–è¾‘ | Dialogç¼–è¾‘ + SharedPreferenceså­˜å‚¨ | `ProfileScreen.kt:254-333` |
| ç¼–è¾‘å›¾æ ‡ | ç‚¹å‡»å¼¹å‡ºç¼–è¾‘å¯¹è¯æ¡† | `ProfileScreen.kt:127-147` |

#### ä¸ªäººé¦–é¡µ
- **ä¸ªäºº** å¤´åƒï¼Œå…³æ³¨ï¼Œç²‰ä¸ï¼Œå–œæ¬¢
- **å®ç°è¦æ±‚**ï¼š
    - **Column** æ˜¯ä¸€ä¸ªå‚ç›´æ–¹å‘çš„çº¿æ€§å¸ƒå±€ åŒ…æ‹¬(ICON + TXT + ROW)
    - **Row** æ˜¯ä¸€ä¸ªæ°´å¹³æ–¹å‘çš„çº¿æ€§å¸ƒå±€ åŒ…æ‹¬(å…³æ³¨ï¼Œç²‰ä¸ï¼Œå–œæ¬¢)
---
![profile.image](https://github.com/haoyuh3/CrossiantApp/blob/98f68030e7099a4af952949c4c9bec27a9216fd5/Progress/profile.png)
---
#### 3.6 å…³æ³¨åˆ—è¡¨
- å¤´åƒ + åå­— + å…³æ³¨æŒ‰é’®
- ä½¿ç”¨Roomæ•°æ®åº“å­˜å‚¨å…³æ³¨åˆ—è¡¨
---
![followList.image](https://github.com/haoyuh3/CrossiantApp/blob/fe812653d798f470796456c9f0e442d5db2740e2/Progress/followList.png)
---

#### 3.7 æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯

**1. LazyListçš„Keyä¼˜åŒ–**
```kotlin
LazyVerticalStaggeredGrid {
    items(
        items = posts,
        key = { post -> post.postId }  // ç¨³å®šçš„å”¯ä¸€æ ‡è¯†ç¬¦
    ) { post ->
        PostCard(post)
    }
}
```
**æ•ˆæœï¼š**
- åˆ—è¡¨é¡¹ä½ç½®å˜åŒ–æ—¶ï¼ŒComposeèƒ½è¯†åˆ«åŒä¸€å¯¹è±¡ï¼Œé¿å…é‡å»º
- å‡å°‘ä¸å¿…è¦çš„é‡ç»„ï¼Œæå‡æ»šåŠ¨æ€§èƒ½

**2. å¼‚æ­¥å›¾ç‰‡åŠ è½½**
```kotlin
// ä½¿ç”¨Coilçš„SubcomposeAsyncImageå®ç°æ¸è¿›å¼åŠ è½½
SubcomposeAsyncImage(
    model = imageUrl,
    loading = { CircularProgressIndicator() },    // åŠ è½½æ€
    error = { Text("åŠ è½½å¤±è´¥") },                  // é”™è¯¯æ€
    contentScale = ContentScale.Crop
)
```

### 4. æ•°æ®å±‚è®¾è®¡

#### 4.1 æ•°æ®åº“è®¾è®¡ï¼ˆRoomï¼‰

**Schemaè®¾è®¡ï¼š**

```sql
-- postsè¡¨ï¼ˆå¸–å­ä¸»è¡¨ï¼‰
CREATE TABLE posts (
    post_id TEXT PRIMARY KEY NOT NULL,
    title TEXT NOT NULL,
    content TEXT NOT NULL,
    hashtags_json TEXT NOT NULL,      -- JSONåºåˆ—åŒ–çš„List<Hashtag>
    create_time INTEGER,
    author_json TEXT NOT NULL,         -- JSONåºåˆ—åŒ–çš„Authorå¯¹è±¡
    clips_json TEXT NOT NULL,          -- JSONåºåˆ—åŒ–çš„List<Clip>
    music_json TEXT,                   
    like_count INTEGER DEFAULT 0,
    is_liked INTEGER DEFAULT 0         
);

-- followed_usersè¡¨ï¼ˆå…³æ³¨ç”¨æˆ·è¡¨ï¼‰
CREATE TABLE followed_users (
    userId TEXT PRIMARY KEY NOT NULL,
    nickname TEXT NOT NULL,
    avatar TEXT NOT NULL,
    bio TEXT DEFAULT '',
    followedTime INTEGER DEFAULT (strftime('%s', 'now'))
);
```
**DAOæ¥å£è®¾è®¡ï¼š app/src/main/java/com/bytedance/croissantapp/data/local/dao/PostDao.java**

---

#### 4.2 ç½‘ç»œå±‚è®¾è®¡ï¼ˆRetrofitï¼‰

**APIæ¥å£å®šä¹‰ï¼š**

```kotlin
interface FeedApi {
    @GET("feed/")
    suspend fun getFeed(
        @Query("count") count: Int,
        @Query("accept_video_clip") acceptVideoClip: Boolean = false
    ): FeedResponse
}
```
**ç½‘ç»œé…ç½®ï¼ˆAppModule.ktï¼‰ï¼š**

---

#### 4.3 æ•°æ®è½¬æ¢å±‚ï¼ˆMapperï¼‰

**è½¬æ¢é“¾è·¯ï¼š**
```
Network DTO â†â†’ Domain Model â†â†’ Database Entity
  (PostDto)      (Post)          (PostEntity)
```

**å…³é”®Mapperå®ç°ï¼š**

```kotlin
// data/model/FeedResponse.kt
fun PostDto.toDomain(): Post {}
// data/local/mapper/PostMapper.kt
fun Post.toEntity(): PostEntity {}
fun PostEntity.toDomain(): Post {}
```

**è®¾è®¡åŸåˆ™ï¼š**
- Domain Modelæ˜¯çº¯ä¸šåŠ¡æ¨¡å‹ï¼Œä¸åŒ…å«ä»»ä½•åºåˆ—åŒ–æ³¨è§£
- DTOè´Ÿè´£ç½‘ç»œä¼ è¾“ï¼Œä½¿ç”¨`@SerializedName`é€‚é…åç«¯å­—æ®µ
- Entityè´Ÿè´£æ•°æ®åº“å­˜å‚¨

---

### 5. å¯¼èˆªç³»ç»Ÿ

#### Navigation Composeæ¶æ„
- æœ¬é¡¹ç›®ä½¿ç”¨**Navigation Compose**å®ç°å•Activityå¤šå±å¹•æ¶æ„ï¼š

#### åº•éƒ¨å¯¼èˆªæ å®ç°ï¼š BottomNavigationBar.kt
- **Tabåˆ—è¡¨**ï¼ˆä»å·¦åˆ°å³ï¼‰ï¼šé¦–é¡µã€æœ‹å‹ã€ç›¸æœº(+)ã€æ¶ˆæ¯ã€æˆ‘
- **å®ç°è¦æ±‚**ï¼š
    - åªéœ€æ”¯æŒ"é¦–é¡µ"å’Œ"æˆ‘"çš„ç‚¹å‡»
    - å¯åŠ¨åé»˜è®¤åœ¨"é¦–é¡µ"
    - ä½¿ç”¨ `NavigationBarItem`
    -
#### å¯¼èˆªç³»ç»Ÿé…ç½®
- ç†è§£Navigation Compose
  **Navigation Compose** æ˜¯Jetpack Composeçš„å¯¼èˆªåº“ï¼š
- ä½¿ç”¨rememberNavController() ä¿æŒnavigator controller
- å®ç°NavGraph (å¯¼èˆªé¡µé¢)
- å®ç°NavHost (é¡µé¢å®¹å™¨)
- composable(route = Routes.HOME)/ Routes.Profile é…ç½®å¯¼èˆªè·¯ç”±
---
### 6. ä¾èµ–æ³¨å…¥ï¼ˆHiltï¼‰AppModule.kt
---
### 7. å·¥å…·ç±»

| å·¥å…·ç±» | åŠŸèƒ½ | æ–‡ä»¶ä½ç½® |
|--------|------|----------|
| **DateUtil** | æ—¶é—´æ ¼å¼åŒ–ï¼ˆç›¸å¯¹æ—¶é—´ï¼š"2å°æ—¶å‰"ï¼‰ | `util/DateUtil.kt` |
| **LikeCntUtil** | æ•°å­—æ ¼å¼åŒ–ï¼ˆ10000 â†’ "1.0w"ï¼‰ | `util/LikeCntUtil.kt` |
| **ImageUtil** | å›¾ç‰‡å¤„ç†å·¥å…· | `util/ImageUtil.kt` |
| **Constants** | åº”ç”¨å¸¸é‡å®šä¹‰ | `util/Constants.kt` |


## ä¸ªäººæ€è€ƒ

### 1. æ¶æ„è®¾è®¡çš„æ”¶è·
---
#### 1.1 MVVMåœ¨Composeä¸­çš„é€‚é…

ä¼ ç»ŸMVVMä½¿ç”¨LiveData + XMLï¼Œè¿ç§»åˆ°Composeåçš„å˜åŒ–ï¼š

| å¯¹æ¯”é¡¹ | ä¼ ç»ŸMVVM | Compose MVVM |
|--------|---------|--------------|
| **çŠ¶æ€å®¹å™¨** | LiveData | StateFlow / State |
| **UIæ›´æ–°è§¦å‘** | observe(lifecycle) { } | collectAsState() |
| **åŒå‘ç»‘å®š** | DataBinding | ä¸æ¨èï¼ˆå•å‘æ•°æ®æµï¼‰ |
| **ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥** | LiveDataè‡ªåŠ¨å¤„ç† | collectAsStateWithLifecycle() |
---

### 2. æŠ€æœ¯é€‰å‹çš„åæ€

#### 2.1 Jetpack Composeçš„æ·±åº¦åº”ç”¨

**é€‰å‹ç†ç”±ï¼š**
- **å£°æ˜å¼UI**å‡å°‘80%çš„æ ·æ¿ä»£ç ï¼ˆç›¸æ¯”XML + findViewByIdï¼‰
- **é¢„è§ˆåŠŸèƒ½**ï¼š`@Preview`æ³¨è§£å®ç°ç»„ä»¶çº§è°ƒè¯•

**å®è·µä¸­çš„"å‘"ï¼š**

1. **é‡ç»„æ€§èƒ½é—®é¢˜**
2. **å‰¯ä½œç”¨ç®¡ç†æ··æ·†**
    - `LaunchedEffect`ï¼šä¸€æ¬¡æ€§æ“ä½œï¼ˆå¦‚æ•°æ®åŠ è½½ï¼‰
    - `DisposableEffect`ï¼šéœ€è¦æ¸…ç†çš„å‰¯ä½œç”¨ï¼ˆå¦‚æ³¨å†Œç›‘å¬å™¨ï¼‰
    - `SideEffect`ï¼šæ¯æ¬¡é‡ç»„éƒ½æ‰§è¡Œï¼ˆæå°‘ä½¿ç”¨ï¼‰
---


#### 2.2 ç¦»çº¿ä¼˜å…ˆç­–ç•¥çš„å±€é™

**å­˜åœ¨çš„é—®é¢˜ï¼š**

1 **æ— ç½‘ç¼ºå°‘é‡è¯•æœºåˆ¶**
2.**ç¼ºå°‘ç¼“å­˜è¿‡æœŸç­–ç•¥ï¼ˆTTLï¼‰**
    - ç”¨æˆ·å¯èƒ½çœ‹åˆ°ä¸€å‘¨å‰çš„æ—§æ•°æ®
    - è§£å†³æ–¹æ¡ˆï¼šæ·»åŠ `cached_at`å­—æ®µï¼Œè¶…è¿‡1å°æ—¶å¼ºåˆ¶åˆ·æ–°
---

### 3. å½“å‰æ¶æ„çš„ä¸è¶³ä¸æ”¹è¿›æ–¹æ¡ˆ

#### 3.1 å…³é”®é—®é¢˜ï¼šç”¨æˆ·æ“ä½œæœªåŒæ­¥åˆ°æœåŠ¡å™¨

**åæœï¼š**
- ç”¨æˆ·æ¢è®¾å¤‡åæ‰€æœ‰ç‚¹èµè®°å½•ä¸¢å¤±
- ä½œè€…çœ‹ä¸åˆ°ç‚¹èµæ•°å¢åŠ 
- æ— æ³•å®ç°è·¨ç«¯åŒæ­¥

#### 3.2 ç¼ºå°‘æ•°æ®ä¸€è‡´æ€§ä¿è¯

**é—®é¢˜åœºæ™¯ï¼š**
```
æ—¶é—´çº¿ï¼š
10:00 - ç”¨æˆ·Aåœ¨é¦–é¡µç‚¹èµå¸–å­Xï¼ˆæœ¬åœ°è®¡æ•° = 100ï¼‰
10:05 - ç”¨æˆ·Bä¹Ÿç‚¹èµäº†å¸–å­Xï¼ˆæœåŠ¡å™¨è®¡æ•° = 101ï¼‰
10:10 - ç”¨æˆ·Aåˆ·æ–°é¦–é¡µï¼ˆAPIè¿”å›è®¡æ•° = 200ï¼Œç”¨æˆ·Açš„ç‚¹èµè¢«è¦†ç›–ï¼ï¼‰
```

**æ ¹æœ¬åŸå› ï¼š**
- ç‚¹èµæ•°åŒæ—¶å­˜åœ¨äºSharedPreferenceså’ŒAPIå“åº”
- æ²¡æœ‰å†²çªè§£å†³ç­–ç•¥
---

### 4. é¡¹ç›®æ€»ç»“ä¸æœªæ¥å±•æœ›

#### 4.1 æŠ€æœ¯èƒ½åŠ›æå‡

é€šè¿‡Croissanté¡¹ç›®çš„å¼€å‘ï¼Œç³»ç»Ÿæ€§åœ°æŒæ¡äº†ï¼š

| æŠ€æœ¯é¢†åŸŸ | å…·ä½“æ”¶è· | åº”ç”¨åœºæ™¯ |
|---------|---------|----------|
| **Jetpack Compose** | å£°æ˜å¼UIã€çŠ¶æ€ç®¡ç†ã€æ€§èƒ½ä¼˜åŒ– | ç°ä»£Androidå¼€å‘å¿…å¤‡ |
| **Clean Architecture** | åˆ†å±‚è®¾è®¡ã€ä¾èµ–å€’ç½®ã€æµ‹è¯•é©±åŠ¨ | ä¸­å¤§å‹é¡¹ç›®æ¶æ„ |
| **Kotlin Coroutines** | å¼‚æ­¥ç¼–ç¨‹ã€ç»“æ„åŒ–å¹¶å‘ã€Flow | ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æ“ä½œ |
| **Hiltä¾èµ–æ³¨å…¥** | æ¨¡å—åŒ–ã€å¯æµ‹è¯•æ€§ã€å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç®¡ç† | ä¼ä¸šçº§åº”ç”¨å¼€å‘ |
| **Roomæ•°æ®åº“** | ORMæ˜ å°„ã€æ•°æ®æŒä¹…åŒ–ã€è¿ç§»ç®¡ç† | ç¦»çº¿ä¼˜å…ˆåº”ç”¨ |

---

#### 4.2 å¾…å®ç°åŠŸèƒ½è§„åˆ’

**ç›®æ ‡**
- [ ] **éŸ³ä¹æ’­æ”¾åŠŸèƒ½**
-
- [ ] **è§†å±æµç«–æ»‘**
    - ç‚¹èµ/å…³æ³¨æ“ä½œè°ƒç”¨åç«¯API
    - WorkManagerå®ç°ç¦»çº¿é˜Ÿåˆ—
    - å†²çªè§£å†³ç­–ç•¥
-
- [ ] **è¯„è®ºç³»ç»Ÿ**
    - è¯„è®ºåˆ—è¡¨å±•ç¤ºï¼ˆRecyclerView â†’ LazyColumnï¼‰
    - å›å¤åŠŸèƒ½ï¼ˆåµŒå¥—è¯„è®ºï¼‰
    - @æåŠç”¨æˆ·

- [ ] **æ— ç½‘/å¼±ç½‘ç»œ**
    - é‡è¯•åˆ·æ–°
    - 
---

#### 4.3 åæ€ä¸æ„Ÿæ‚Ÿ

**é‡åˆ°çš„æŒ‘æˆ˜ï¼š**
1. **Composeå­¦ä¹ æ›²çº¿**ï¼šåˆæœŸå¯¹é‡ç»„æœºåˆ¶ç†è§£ä¸è¶³ï¼Œå¯¼è‡´æ€§èƒ½é—®é¢˜
2. **çŠ¶æ€ç®¡ç†æ··ä¹±**ï¼šä¸€åº¦åŒæ—¶ä½¿ç”¨LiveDataã€StateFlowã€Stateï¼Œåç»Ÿä¸€ä¸ºStateFlow
3. **æ•°æ®å­˜å‚¨é€‰å‹**ï¼š éƒ¨åˆ†æ•°æ®ä¸€å¼€å§‹ä½¿ç”¨sharepreferenceå­˜å‚¨ï¼Œåç»­ä½¿ç”¨Roomå¼€å‘ï¼Œå­˜åœ¨éƒ¨åˆ†æ•°æ®ä¸ä¸€è‡´é—®é¢˜


## é™„å½•

### A. é¡¹ç›®è¿è¡Œç¯å¢ƒ

| é¡¹ç›® | è¦æ±‚ |
|------|------|
| **æœ€ä½Androidç‰ˆæœ¬** | API 24 (Android 7.0) |
| **ç›®æ ‡Androidç‰ˆæœ¬** | API 36 (Android 14+) |
| **Kotlinç‰ˆæœ¬** | 2.0.21 |
| **Gradleç‰ˆæœ¬** | 8.13.1 |
| **JDKç‰ˆæœ¬** | JDK 11 |

### B. æ ¸å¿ƒä¾èµ–æ¸…å•

```kotlin
dependencies {
    // Compose
    implementation(platform("androidx.compose:compose-bom:2024.09.00"))
    implementation("androidx.compose.ui:ui")
    implementation("androidx.compose.material3:material3")

    // Hilt
    implementation("com.google.dagger:hilt-android:2.48")
    kapt("com.google.dagger:hilt-compiler:2.48")

    // Retrofit
    implementation("com.squareup.retrofit2:retrofit:2.11.0")
    implementation("com.squareup.retrofit2:converter-gson:2.11.0")

    // Room
    implementation("androidx.room:room-runtime:2.6.1")
    implementation("androidx.room:room-ktx:2.6.1")
    kapt("androidx.room:room-compiler:2.6.1")

    // Coil
    implementation("io.coil-kt:coil-compose:2.5.0")
}
```

### C. å‚è€ƒèµ„æº

- [Jetpack Composeå®˜æ–¹æ–‡æ¡£](https://developer.android.com/jetpack/compose)
- [Androidæ¶æ„æŒ‡å—](https://developer.android.com/topic/architecture)
- [Kotlin Coroutineså®˜æ–¹æŒ‡å—](https://kotlinlang.org/docs/coroutines-guide.html)
- [Roomæ•°æ®åº“æ–‡æ¡£](https://developer.android.com/training/data-storage/room)

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
**æœ€åæ›´æ–°**ï¼š2025-12-01
**ä½œè€…**ï¼šé»„æµ©å®‡
**è”ç³»æ–¹å¼**ï¼š[é¡¹ç›®ä»“åº“](https://github.com/haoyuh3/CrossiantApp)